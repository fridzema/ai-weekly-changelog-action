---
phase: 03-code-quality-tooling
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - src/generate_changelog.py
  - tests/conftest.py
  - tests/test_smoke.py
  - tests/test_redaction.py
  - tests/test_chunking.py
  - tests/test_retry.py
  - tests/test_changelog.py
  - tests/test_language.py
autonomous: true

must_haves:
  truths:
    - "Ruff formatting applied consistently across all Python files"
    - "All Ruff linting errors are resolved"
    - "Existing test suite still passes after formatting"
  artifacts:
    - path: "src/generate_changelog.py"
      provides: "Main source file, formatted and lint-clean"
    - path: "tests/"
      provides: "Test files, formatted"
  key_links:
    - from: "ruff format"
      to: "src/ tests/"
      via: "formatting applied to all files"
      pattern: "0 files would be reformatted"
---

<objective>
Apply Ruff formatting to entire codebase and resolve all linting errors

Purpose: Achieve consistent code style and clean lint status (QUAL-02, QUAL-03)
Output: All Python files formatted consistently, zero linting errors
</objective>

<execution_context>
@/Users/robertfridzema/.claude/get-shit-done/workflows/execute-plan.md
@/Users/robertfridzema/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-code-quality-tooling/03-01-SUMMARY.md
@pyproject.toml
@src/generate_changelog.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Apply Ruff formatting to entire codebase</name>
  <files>src/generate_changelog.py, tests/*.py</files>
  <action>
Run Ruff formatter on all Python files:

```bash
ruff format src/ tests/
```

This will:
- Apply consistent quote style (double quotes)
- Fix indentation
- Normalize whitespace
- Organize imports (via isort integration)

After formatting, verify no files need reformatting:
```bash
ruff format --check src/ tests/
```

Expected output: "0 files would be reformatted" or similar success message.
  </action>
  <verify>
Run: `ruff format --check src/ tests/`
Expected: Exit code 0, message indicating no changes needed
  </verify>
  <done>All Python files in src/ and tests/ are consistently formatted</done>
</task>

<task type="auto">
  <name>Task 2: Fix all Ruff linting errors</name>
  <files>src/generate_changelog.py</files>
  <action>
First, run auto-fix for issues Ruff can resolve automatically:
```bash
ruff check --fix src/ tests/
```

Then check what remains:
```bash
ruff check src/ tests/
```

For any remaining errors, manually fix them. Common issues to expect:
- Unused imports (F401) - auto-fixed
- Import sorting (I001) - auto-fixed by formatter
- Security warnings (S-prefixed) - may need manual review

If security warnings appear in src/:
- S101 (assert): Should not appear in main code
- S105-S107 (hardcoded passwords): Verify these are false positives or fix
- Other S-codes: Review and fix as needed

Note: S101 is ignored in tests/ via per-file-ignores, so test assertions are allowed.
  </action>
  <verify>
Run: `ruff check src/ tests/`
Expected: No errors (exit code 0, or only warnings that are explicitly ignored)
  </verify>
  <done>ruff check passes with zero errors on src/ and tests/</done>
</task>

<task type="auto">
  <name>Task 3: Verify test suite still passes</name>
  <files></files>
  <action>
Run the full test suite to ensure formatting changes didn't break anything:

```bash
pytest tests/ -v
```

Expected: All 61 tests pass.

If any tests fail:
- Check if formatting changed string comparisons
- Check if import reordering affected test imports
- Fix the specific issues without reverting formatting

Also verify coverage hasn't dropped:
```bash
pytest tests/ --cov=src --cov-report=term-missing
```

Expected: Coverage still >= 80% (was 91%)
  </action>
  <verify>
Run: `pytest tests/ -v`
Expected: All tests pass (61 passed)
  </verify>
  <done>All 61 tests pass after formatting and lint fixes applied</done>
</task>

</tasks>

<verification>
1. `ruff format --check src/ tests/` exits with code 0
2. `ruff check src/ tests/` exits with code 0 (no errors)
3. `pytest tests/ -v` shows all 61 tests passing
4. `pytest tests/ --cov=src` shows coverage >= 80%
</verification>

<success_criteria>
- Ruff formatting applied to all Python files (QUAL-02)
- Zero Ruff linting errors (QUAL-03)
- Ruff S (security) rules enabled and passing (QUAL-04)
- Test suite passes unchanged (no regressions from formatting)
</success_criteria>

<output>
After completion, create `.planning/phases/03-code-quality-tooling/03-02-SUMMARY.md`
</output>
